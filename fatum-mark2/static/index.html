<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FATUM MARK 2 // QUANTUM FENG SHUI</title>
    <link rel="stylesheet" href="editor.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
</head>
<body>
    <div class="scanlines"></div>
    <div class="glow-overlay"></div>

    <div id="app">
        <header>
            <h1>FATUM MARK 2 <span class="blink">_ONLINE</span></h1>
            <nav>
                <button onclick="showTab('profiles')" class="nav-btn">Profiles</button>
                <button onclick="showTab('fengshui')" class="nav-btn active">Feng Shui</button>
                <button onclick="showTab('zeri')" class="nav-btn">Date Selection</button>
                <button onclick="showTab('divination')" class="nav-btn">Divination</button>
                <button onclick="showTab('history')" class="nav-btn">History</button>
            </nav>
        </header>

        <main>
            <!-- PROFILES TAB -->
            <section id="tab-profiles" class="tab-content" style="display:none;">
                <h2>USER PROFILES</h2>
                <div class="panel">
                    <div class="form-group">
                        <label>Name:</label> <input type="text" id="p-name">
                    </div>
                    <div class="form-row">
                        <div><label>Year:</label> <input type="number" id="p-year" value="1990"></div>
                        <div><label>Month:</label> <input type="number" id="p-month" value="1"></div>
                        <div><label>Day:</label> <input type="number" id="p-day" value="1"></div>
                        <div><label>Hour:</label> <input type="number" id="p-hour" value="12"></div>
                    </div>
                    <div class="form-group">
                        <label>Gender:</label>
                        <select id="p-gender">
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select>
                    </div>
                    <button class="cyber-btn" onclick="createProfile()">REGISTER ENTITY</button>
                </div>
                <div id="profile-list" class="data-grid">
                    <!-- Loaded dynamically -->
                </div>
            </section>

            <!-- FENG SHUI TAB -->
            <section id="tab-fengshui" class="tab-content">
                <div class="sidebar">
                    <h3>PARAMETERS</h3>
                    <div class="form-group">
                        <label>Active Profile:</label>
                        <select id="fs-profile-select" onchange="loadProfileIntoForm()">
                            <option value="">-- Manual Input --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Construction Year:</label>
                        <input type="number" id="fs-year" value="2004">
                    </div>
                    <div class="form-group">
                        <label>Facing (Deg):</label>
                        <input type="number" id="fs-facing" value="180">
                    </div>
                    <div class="form-group">
                        <label>Intention:</label>
                        <input type="text" id="fs-intention" placeholder="Wealth, Health...">
                    </div>
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="fs-quantum">
                            <span class="checkmark"></span>
                            Quantum Mode
                        </label>
                    </div>
                    <button class="cyber-btn" onclick="runFengShui()">INITIATE SEQUENCE</button>
                    <button class="cyber-btn secondary" onclick="saveReport('fengshui')">ARCHIVE RESULT</button>
                    <button class="cyber-btn secondary" onclick="downloadPdf()">DOWNLOAD PDF</button>

                    <hr>
                    <div id="virtual-cures-panel">
                        <h4>VIRTUAL CURES</h4>
                        <div class="cure-palette">
                            <div class="cure-item" draggable="true" ondragstart="drag(event)" data-type="Metal">Metal</div>
                            <div class="cure-item" draggable="true" ondragstart="drag(event)" data-type="Water">Water</div>
                            <div class="cure-item" draggable="true" ondragstart="drag(event)" data-type="Wood">Wood</div>
                            <div class="cure-item" draggable="true" ondragstart="drag(event)" data-type="Fire">Fire</div>
                            <div class="cure-item" draggable="true" ondragstart="drag(event)" data-type="Earth">Earth</div>
                        </div>
                    </div>

                    <hr>
                    <h3>FLOORPLAN</h3>
                    <div class="form-group">
                        <label>Upload Image:</label>
                        <input type="file" id="fs-floorplan-upload" accept="image/*">
                    </div>
                    <div class="form-group">
                        <label>Grid X:</label>
                        <input type="range" id="fs-grid-x" min="-300" max="300" value="0" oninput="updateGridTransform()">
                    </div>
                    <div class="form-group">
                        <label>Grid Y:</label>
                        <input type="range" id="fs-grid-y" min="-300" max="300" value="0" oninput="updateGridTransform()">
                    </div>
                    <div class="form-group">
                        <label>Grid Scale:</label>
                        <input type="range" id="fs-grid-scale" min="0.1" max="2.0" step="0.1" value="1.0" oninput="updateGridTransform()">
                    </div>
                    <div class="form-group">
                        <label>Grid Opacity:</label>
                        <input type="range" id="fs-grid-opacity" min="0.1" max="1.0" step="0.1" value="0.8" oninput="updateGridTransform()">
                    </div>
                </div>

                <div class="viewport">
                    <div id="fs-svg-container" class="svg-container"></div>
                    <div id="bazi-svg-container" class="svg-container"></div>
                    <div id="fs-output" class="console-output">
                        > Awaiting Input...
                    </div>
                </div>
            </section>

            <!-- DATE SELECTION TAB -->
            <section id="tab-zeri" class="tab-content" style="display:none;">
                <h2>QUANTUM DATE SELECTION</h2>
                <div class="panel">
                    <div class="form-row">
                        <div><label>Start Date:</label> <input type="date" id="zr-start"></div>
                        <div><label>End Date:</label> <input type="date" id="zr-end"></div>
                    </div>
                    <div class="form-group">
                        <label>Intention:</label>
                        <input type="text" id="zr-intention" placeholder="Wedding, Grand Opening...">
                    </div>
                    <button class="cyber-btn" onclick="runZeRi()">SCAN TIMELINE</button>
                </div>
                <div id="zr-output" class="data-grid">
                    <!-- Results -->
                </div>
            </section>

            <!-- DIVINATION TAB -->
            <section id="tab-divination" class="tab-content" style="display:none;">
                <h2>QUANTUM I CHING</h2>
                <div class="divination-container">
                    <div class="hex-display">
                        <div id="hex-svg-container" class="svg-container"></div>
                    </div>
                    <div class="controls">
                        <p>Accessing CURBy Quantum Entropy Source...</p>
                        <button class="cyber-btn" onclick="castHexagram()">CAST HEXAGRAM</button>
                        <button class="cyber-btn secondary" onclick="saveReport('divination')">ARCHIVE RESULT</button>
                    </div>
                </div>
                <div id="divination-text" class="console-output large-text">
                    <!-- Text goes here -->
                </div>
            </section>

            <!-- HISTORY TAB -->
            <section id="tab-history" class="tab-content" style="display:none;">
                <h2>ARCHIVES</h2>
                <button class="cyber-btn small" onclick="loadHistory()">REFRESH</button>
                <div id="history-list" class="data-grid">
                    <!-- Loaded dynamically -->
                </div>
            </section>
        </main>
    </div>

    <script src="visual_feng_shui.js"></script>
</body>
</html>
